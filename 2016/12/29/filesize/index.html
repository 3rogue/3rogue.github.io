<!DOCTYPE HTML><html><head><meta charset="utf-8"><title>硬盘文件大小排序 | Yeoman</title><meta name="author" content="Yeoman"><meta name="description" content="python web acg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:title" content="硬盘文件大小排序"><meta property="og:site_name" content="Yeoman"><meta property="og:image" content="undefined"><link href="/favicon.ico" rel="icon" type="image/x-ico"><link rel="alternate" href="/atom.xml" title="Yeoman" type="application/atom+xml"><link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"><link rel="stylesheet" href="/google-code-prettify/prettify.css" type="text/css"><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--></head></html><body><header id="banner"><div id="header" class="inner"><div id="head-content"><div class="blur1"></div><div class="alignleft"><h1><a href="/">Yeoman</a></h1><h2><a href="/">心有猛虎，细嗅蔷薇。</a></h2></div></div><div id="head-nav"><div class="blur2"></div><div id="main-nav"><ul><li><a href="/">Home</a></li><li><a href="/archives">Archives</a></li><li><a href="/atom.xml">RSS</a></li><li><a href="/about">About</a></li></ul><div class="clearfix"></div></div></div><div class="clearfix"></div></div></header><div id="content" class="inner"><div id="main-col" class="alignleft"><div id="wrapper"><article class="post"><div class="post-content"><header><div class="icon"></div><time datetime="2016-12-28T16:00:00.000Z"><a href="/2016/12/29/filesize/">2016-12-29</a></time><h1 class="title">硬盘文件大小排序</h1></header><div class="entry"><p>学的 os , os.path 模块对文件目录处理，顺便实战一下。</p><pre><code class="python">import os

def list_size(path):
    res={}
    for dirpath, dirnames, filenames in os.walk(path):
        for name in filenames:
            fullpath = os.path.join(dirpath, name)
            size = round(os.path.getsize(fullpath))
            if size&gt;0:
                res[fullpath] = round(size/1024/1024)
    return sorted(res.items(), key = lambda d:d[1], reverse = True)

path = &#39;E:&#39;
with open(os.path.join(&#39;E:&#39;, &#39;filesize.txt&#39;),&#39;w&#39;) as f:
    for i in list_size(path):
        f.write(i[0]+&#39;\t&#39;+str(i[1])+&#39;MB&#39;+&#39;\n&#39;)
</code></pre><p>os.listdir 只能看当前目录的文件，子文件夹的就不管了，所以就需要 os.walk 的遍历了。虽然小，不过还是挺实用的程序。</p></div><footer><div class="categories"><a href="/categories/python/">python</a></div><div class="tags"><a href="/tags/杂物间/">杂物间</a></div><div class="clearfix"></div></footer></div></article><nav id="pagination"><a href="/2017/01/14/lyric/" class="alignleft prev">上一页</a> <a href="/2016/12/29/mydouban/" class="alignright next">下一页</a><div class="clearfix"></div></nav><section id="comment"><div class="ds-thread" data-thread-key="2016/12/29/filesize/" data-title="硬盘文件大小排序" data-url="https://3rogue.xyz/2016/12/29/filesize/"></div><script type="text/javascript">var duoshuoQuery={short_name:"3rogue"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()</script></section></div></div><aside id="sidebar" class="alignright"><div class="search"><form action="//www.google.com/search" method="get" accept-charset="utf-8"><input type="search" name="q" results="0" placeholder="搜索"> <input type="hidden" name="q" value="site:3rogue.xyz"></form></div><div class="widget tag"><h3 class="title">分类</h3><ul class="entry"><li><a href="/categories/acg/">acg</a><small>1</small></li><li><a href="/categories/blog/">blog</a><small>2</small></li><li><a href="/categories/life/">life</a><small>1</small></li><li><a href="/categories/python/">python</a><small>7</small></li><li><a href="/categories/sth/">sth</a><small>1</small></li></ul></div><div class="widget tagcloud"><h3 class="title">标签云</h3><div class="entry"><a href="/tags/Hexo/" style="font-size:10px">Hexo</a> <a href="/tags/Markdown/" style="font-size:10px">Markdown</a> <a href="/tags/Pushbullet/" style="font-size:10px">Pushbullet</a> <a href="/tags/Telegram/" style="font-size:10px">Telegram</a> <a href="/tags/acg/" style="font-size:10px">acg</a> <a href="/tags/douban/" style="font-size:10px">douban</a> <a href="/tags/https/" style="font-size:10px">https</a> <a href="/tags/image/" style="font-size:10px">image</a> <a href="/tags/杂物间/" style="font-size:10px">杂物间</a> <a href="/tags/爬虫/" style="font-size:20px">爬虫</a></div></div></aside><div class="clearfix"></div></div><footer id="footer" class="inner"><div class="alignleft">&copy; 2017 Yeoman</div><div class="clearfix"></div></footer><script src="/google-code-prettify/prettify.js"></script><script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script><script src="/js/jquery.imagesloaded.min.js"></script><script src="/js/gallery.js"></script><script>$(window).load(function(){$("pre").addClass("prettyprint linenums").attr("style","overflow:auto;"),PR.prettyPrint()})</script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script type="text/javascript">!function(n){n(".fancybox").fancybox()}(jQuery)</script></body>